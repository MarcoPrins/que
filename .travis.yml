language: ruby
rvm:
  - "2.2"
  - "2.3"
  - "2.4"
before_script:
  - psql -c 'create database "que-test"' -U postgres
  - bundle exec ruby -r sequel -r ./lib/que -e 'Que.connection=Sequel.connect("postgres://localhost/que-test"); Que.migrate!'

script: "./spec/travis.rb"

addons:
  postgresql: 9.3
